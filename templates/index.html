<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resource Tracker</title>
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/resources.css">
    <link rel="stylesheet" href="/static/css/schematics.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
</head>
<body>
	<header class="main-header">
		<div class="logo"><span>SWG</span>BUDDY</div>
		<nav class="top-nav">
			<button class="nav-btn active" data-target="resources-container">RESOURCES</button>
			<button class="nav-btn" data-target="schematics-container">SCHEMATICS</button>
		</nav>
	</header>
    <div class="app-container">
		<main id="main-content">
			<section id="resources-container" class="page-container active">
				<div class="resource-filters-row">
					<div class="custom-dropdown" id="taxonomy-dropdown">
                        <div class="dropdown-selected" onclick="toggleDropdown()">All Resources</div>
                        <div class="dropdown-list" id="taxonomy-list">
                            <div class="dropdown-item root-item" data-id="" data-label="" onclick="selectCategory(this)">All Resources</div>
                        </div>
                    </div>
                    <input type="text" placeholder="Search resources..." class="search-input">
				</div>
				<table class="resource-table">
					<thead>
						<tr>
							<th class="col-name"><div class="sort-header-left" onclick="toggleSort('name')">NAME <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-type"><div class="sort-header-left" onclick="toggleSort('type')">TYPE <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat"><div class="sort-header" onclick="toggleSort('res_oq')">OQ <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat"><div class="sort-header" onclick="toggleSort('res_cd')">CD <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat"><div class="sort-header" onclick="toggleSort('res_dr')">DR <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat"><div class="sort-header" onclick="toggleSort('res_fl')">FL <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat"><div class="sort-header" onclick="toggleSort('res_hr')">HR <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat"><div class="sort-header" onclick="toggleSort('res_ma')">MA <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat"><div class="sort-header" onclick="toggleSort('res_pe')">PE <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat"><div class="sort-header" onclick="toggleSort('res_ut')">UT <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-loc">LOCATION</th>
							<th class="col-date"><div class="sort-header" onclick="toggleSort('spawned_at')">DATE <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-status"><div class="sort-header" onclick="toggleSort('is_active')">STATUS <div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-spacer"></th>
						</tr>
					</thead>
					<tbody id="resource-log-body"></tbody>
				</table>
			</section>

			<section id="schematics-container" class="page-container">
				<div class="placeholder-msg">Schematics functionality coming soon...</div>
			</section>
		</main>
    </div>
<script src="{{ url_for('static', filename='js/config.js') }}"></script>
<script src="{{ url_for('static', filename='js/api.js') }}"></script>
<script src="{{ url_for('static', filename='js/resources.js') }}"></script>
<script src="{{ url_for('static', filename='js/app.js') }}"></script>

<script>
    // Main Entry Point
    document.addEventListener('DOMContentLoaded', async () => {
        // 1. Initialize SPA Tab Logic and Listeners
        initTabs(); 
        initListeners();
        // 2. Fetch Data from API
        // Promise.all ensures both load before we trigger initial filters
        await Promise.all([
            loadResources(),
            loadTaxonomy()
        ]);
        
		updateSortVisuals();
        // 3. Set initial UI state
        console.log("Resource Tracker Initialized");
    });
</script>
</body>
</html>