<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWGBuddy</title>
    
    <meta property="og:title" content="SWGBuddy - Resource Tracker" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://swgbuddy.com/" />
    <meta property="og:description" content="Track and share Star Wars Galaxies resource spawns, stats, and server locations in real-time." />
    <meta property="og:image" content="https://swgbuddy.com/static/img/swgbuddy-preview.png" /> <meta name="theme-color" content="#00d4ff">

	<link rel="icon" type="image/png" href="/static/img/favicon.png">
    <link rel="shortcut icon" href="/static/img/favicon.ico">

    <link rel="stylesheet" href="/static/css/variables.css">
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/resources.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
	<header class="main-header">
		<div class="logo"><span>SWG</span>BUDDY</div>
		<nav class="top-nav">
			<button class="nav-btn active" data-target="resources-container">RESOURCES</button>
			<button class="nav-btn" data-target="schematics-container">SCHEMATICS</button>
		</nav>
		<div class="controls-section">
			<div class="server-select-container">
				<label for="server-select"><i class="fa-solid fa-server"></i></label>
				<select id="server-select-wrapper">
					<option value="cuemu" selected>CUEmu</option>
				</select>
			</div>

			<div id="auth-section" class="auth-section"></div>
		</div>
		<div id="management-modal" class="modal hidden">
			<div class="modal-content management-modal-content">
				<div class="mgmt-header">
					<div style="display:flex; align-items:center;">
						<h2 style="margin:0; color:var(--accent-blue); font-family:'Orbitron';">SERVER MANAGEMENT</h2>
						<select id="mgmt-server-select" class="mgmt-server-select"></select>
					</div>
					<button class="close-modal" onclick="closeManagementModal()">&times;</button>
				</div>
				
				<div class="modal-body mgmt-body">
					<nav class="mgmt-sidebar">
						<button class="mgmt-nav-btn active" data-tab="permissions">User Permissions</button>
						<button class="mgmt-nav-btn" data-tab="logs">Command Log</button>
					</nav>
					
					<div id="mgmt-view-permissions" class="mgmt-view active">
						<div class="permissions-layout">
							<div id="mgmt-user-list" class="user-list-pane">Loading...</div>
							<div id="mgmt-user-detail" class="user-detail-pane">Select a user</div>
						</div>
					</div>
					
					<div id="mgmt-view-logs" class="mgmt-view">
						<div class="placeholder-msg">Command Logs coming soon...</div>
					</div>
				</div>
			</div>
		</div>
	</header>
    <div class="app-container">
		<main id="main-content">
            <div id="page-loader" class="page-loader">
                <div class="spinner"></div>
                <div class="loader-text">INITIALIZING DATAPAD...</div>
            </div>

			<section id="resources-container" class="page-container active">
				<div class="resource-filters-row">
					<div class="filter-input-wrapper">
						<div class="custom-dropdown" id="taxonomy-dropdown">
							<div class="dropdown-selected" onclick="toggleDropdown()">All Resources</div>
							<div class="dropdown-list" id="taxonomy-list">
								<div class="dropdown-item root-item" onclick="selectCategory('', 'Resources', 'All Resources')">All Resources</div>
							</div>
						</div>
						<button class="reset-filter-btn" id="reset-category" title="Reset Category" onclick="selectCategory('', 'Resources', 'All Resources')">
							<i class="fa-solid fa-circle-xmark"></i>
						</button>
					</div>
					<div class="filter-input-wrapper">
                    	<input type="text" placeholder="Search resources..." class="search-input">
						<button class="reset-filter-btn" id="reset-search" title="Clear Search" onclick="clearSearch()">
							<i class="fa-solid fa-circle-xmark"></i>
						</button>
					</div>
                    <button id="btn-add-resource" class="add-resource-btn hidden" onclick="openAddResourceModal()">Add Resource</button>
					
                    <div class="pagination-stack">
						<div class="confirmation-toggle">
							<label style="font-size: 11px; color: var(--text-dim); cursor: pointer;">
								<input type="checkbox" id="skip-confirm-toggle" onchange="toggleConfirmPreference(this)">
								SKIP REMOVAL CONFIRMATIONS
							</label>
						</div>
						<div class="pagination-controls">
							<label for="results-per-page">Show Results:</label>
							<select id="results-per-page" class="results-select" onchange="changeResultsPerPage()">
								<option value="10">10</option>
								<option value="25">25</option>
								<option value="50" selected>50</option>
								<option value="100">100</option>
							</select>
						</div>

						<div id="page-nav-container" class="page-nav-container">
							<button id="btn-first" class="page-nav-btn" onclick="goToPage('first')">«</button>
							<button id="btn-prev" class="page-nav-btn" onclick="goToPage('prev')">‹</button>
							
							<select id="page-select" class="results-select" onchange="goToPage(this.value)">
								</select>
							
							<button id="btn-next" class="page-nav-btn" onclick="goToPage('next')">›</button>
							<button id="btn-last" class="page-nav-btn" onclick="goToPage('last')">»</button>
						</div>
					</div>
				</div>
                
				<div id="resource-modal" class="modal hidden">
					<div class="modal-content">
						<div class="modal-header">
							<h2 id="modal-title">Resource Details</h2>
							<button class="close-modal" onclick="closeResourceModal()">&times;</button>
						</div>
						
						<div id="modal-loader" class="modal-loader hidden">
							<div class="spinner"></div>
							<div class="loader-text">PROCESSING...</div>
						</div>

						<div class="modal-body">
							<form id="resource-form">
								<div class="form-group">
									<label>Resource Name</label>
									<input type="text" id="res-name" required placeholder="e.g. Polonium" autocomplete="off">
								</div>
								
								<div class="form-group">
									<label>Type</label>
                                    <div class="custom-dropdown" id="modal-type-dropdown">
                                        <div class="dropdown-selected" id="modal-type-selected">Select Resource Type...</div>
                                        <div class="dropdown-list" id="modal-type-list"></div>
                                    </div>
                                    <div id="res-type-display" class="static-value hidden"></div>
                                    <input type="hidden" id="res-type" required>
								</div>

								<div id="stats-label" class="stats-label">Stats</div>
								
                                <div id="stats-container-edit" class="stats-grid hidden">
									<div class="stat-group"><label>OQ</label><input type="number" id="res_oq" min="1" max="1000"></div>
									<div class="stat-group"><label>CR</label><input type="number" id="res_cr" min="1" max="1000"></div>
									<div class="stat-group"><label>CD</label><input type="number" id="res_cd" min="1" max="1000"></div>
									<div class="stat-group"><label>DR</label><input type="number" id="res_dr" min="1" max="1000"></div>
									<div class="stat-group"><label>FL</label><input type="number" id="res_fl" min="1" max="1000"></div>
									<div class="stat-group"><label>HR</label><input type="number" id="res_hr" min="1" max="1000"></div>
									<div class="stat-group"><label>MA</label><input type="number" id="res_ma" min="1" max="1000"></div>
									<div class="stat-group"><label>PE</label><input type="number" id="res_pe" min="1" max="1000"></div>
									<div class="stat-group"><label>SR</label><input type="number" id="res_sr" min="1" max="1000"></div>
									<div class="stat-group"><label>UT</label><input type="number" id="res_ut" min="1" max="1000"></div>
								</div>

                                <div id="stats-container-view" class="stats-grid-view hidden"></div>

                                <div id="meta-container" class="meta-grid">
                                    <div class="form-group">
                                        <label>Date Reported</label>
                                        <div id="res-date" class="static-value">-</div>
                                    </div>
                                    <div class="form-group">
                                        <label>Last Edited By</label>
                                        <div id="res-reporter" class="static-value">-</div>
                                    </div>
                                    <div class="form-group">
                                        <label>Planets</label>
                                        <div id="res-planets" class="static-value">-</div>
                                    </div>
                                    <div class="form-group">
                                        <label>Status</label>
                                        <div id="res-status" class="static-value">-</div>
                                    </div>
                                </div>
								<div class="form-group full-width" style="margin-top: 15px;">
									<label>Notes</label>
									<textarea id="res-notes" class="modal-textarea" placeholder="Enter notes here..."></textarea>
								</div>
								<div class="form-group full-width" id="import-section" style="margin-bottom: 20px; border-bottom: 1px solid var(--border-color); padding-bottom: 15px;">
									<button type="button" class="btn-secondary" onclick="Modal.importClipboard()" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px;">
										<i class="fa-solid fa-clipboard"></i> Paste Image from Clipboard
									</button>
									<div id="paste-error" style="color: #ff4444; font-size: 0.8rem; margin-top: 5px; text-align: center; display: none;"></div>
								</div>

								<div id="modal-status-bar" class="status-bar"></div>

								<div class="modal-footer">
									<button type="button" id="btn-modal-edit" class="btn-secondary" onclick="Modal.enterEditMode()">Edit Details</button>
                                    
                                    <div class="footer-actions">
    									<button type="submit" id="btn-modal-save" class="btn-primary" disabled>Save</button>
                                        <button type="button" id="btn-modal-cancel" class="btn-danger" onclick="Modal.cancel()">Cancel</button>
                                    </div>
								</div>
							</form>
						</div>
					</div>
				</div>

				<table class="resource-table">
					<thead>
						<tr>
							<th class="col-name" data-sort="name" onclick="toggleSort('name')"><div class="sort-wrapper left"><span>NAME </span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-type" data-sort="type" onclick="toggleSort('type')"><div class="sort-wrapper left"><span>TYPE </span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat" data-sort="res_weight_rating" onclick="toggleSort('res_weight_rating')"><div class="sort-wrapper center"><span>Rating</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat" data-sort="res_oq" onclick="toggleSort('res_oq')"><div class="sort-wrapper center"><span>OQ</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat" data-sort="res_cr" onclick="toggleSort('res_cr')"><div class="sort-wrapper center"><span>CR</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat" data-sort="res_cd" onclick="toggleSort('res_cd')"><div class="sort-wrapper center"><span>CD</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat" data-sort="res_dr" onclick="toggleSort('res_dr')"><div class="sort-wrapper center"><span>DR</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat" data-sort="res_fl" onclick="toggleSort('res_fl')"><div class="sort-wrapper center"><span>FL</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat" data-sort="res_hr" onclick="toggleSort('res_hr')"><div class="sort-wrapper center"><span>HR</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat" data-sort="res_ma" onclick="toggleSort('res_ma')"><div class="sort-wrapper center"><span>MA</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat" data-sort="res_pe" onclick="toggleSort('res_pe')"><div class="sort-wrapper center"><span>PE</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat" data-sort="res_sr" onclick="toggleSort('res_sr')"><div class="sort-wrapper center"><span>SR</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-stat" data-sort="res_ut" onclick="toggleSort('res_ut')"><div class="sort-wrapper center"><span>UT</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-loc">LOCATION</th>
							<th class="col-date" data-sort="date_reported" onclick="toggleSort('date_reported')"><div class="sort-wrapper center"><span>DATE</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
							<th class="col-status" data-sort="is_active" onclick="toggleSort('is_active')"><div class="sort-wrapper center"><span>STATUS</span><div class="sort-btns"><span class="up">▲</span><span class="down">▼</span></div></div></th>
						</tr>
					</thead>
					<tbody id="resource-log-body"></tbody>
				</table>
			</section>
			

			<section id="schematics-container" class="page-container">
				<div class="placeholder-msg">Schematics functionality coming soon...</div>
			</section>
		</main>
    </div>
</body>
<script src="{{ url_for('static', filename='js/config.js') }}"></script>
<script src="{{ url_for('static', filename='js/api.js') }}"></script>
<script src="{{ url_for('static', filename='js/taxonomy.js') }}"></script>
<script src="{{ url_for('static', filename='js/auth.js') }}"></script>
<script src="{{ url_for('static', filename='js/management.js') }}"></script> 
<script src="{{ url_for('static', filename='js/table.js') }}"></script>
<script src="{{ url_for('static', filename='js/filters.js') }}"></script>
<script src="{{ url_for('static', filename='js/modal.js') }}"></script>
<script src="{{ url_for('static', filename='js/resources.js') }}"></script>
<script src="{{ url_for('static', filename='js/app.js') }}"></script>
</html>